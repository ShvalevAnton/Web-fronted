<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>Форма</title>
    <link rel="stylesheet" href="css/main.css">
</head>

<body>
    <h3>Пожалуйста, заполните обязательные поля.</h3>

    <form id="myForm" novalidate>
        <div class="form-group">
            <label for="name">Имя:</label>
            <input type="text" id="name" name="name" required>
            <img src="no.jpg" alt="Ошибка" class="status-icon" id="nameStatus">
        </div>

        <div class="form-group">
            <label for="age">Возраст:</label>
            <input type="number" id="age" name="age" min="0" max="120">
            <img src="yes.jpg" alt="OK" class="status-icon" id="ageStatus">
        </div>

        <div class="form-group">
            <label for="email">E-mail:</label>
            <input type="email" id="email" name="email" required>
            <img src="no.jpg" alt="Ошибка" class="status-icon" id="emailStatus">
        </div>

        <div class="form-group">
            <label for="website">Сайт:</label>
            <input type="text" id="website" name="website">
            <img src="yes.jpg" alt="OK" class="status-icon" id="websiteStatus">
        </div>

        <button type="submit">Отправить</button>
    </form>

    <script>
        // Функция для проверки поля на корректность
        function validateField(fieldId, statusId) {
            const field = document.getElementById(fieldId);
            const statusImg = document.getElementById(statusId);

            // Проверяем, есть ли атрибут required и если он есть — валидируем
            if (field.hasAttribute('required')) {
                if (field.value.trim() !== '') {
                    statusImg.src = "./yes.jpg";
                } else {
                    statusImg.src = "./no.jpeg";
                }
            } else {
                // Для необязательных полей показываем зеленую галочку всегда (или можно оставить как есть)
                statusImg.src = "./yes.jpeg";
            }
        }

        // Привязываем события к каждому полю
        document.getElementById('name').addEventListener('input', function () {
            validateField('name', 'nameStatus');
        });

        document.getElementById('age').addEventListener('input', function () {
            validateField('age', 'ageStatus');
        });

        document.getElementById('email').addEventListener('input', function () {
            validateField('email', 'emailStatus');
        });

        document.getElementById('website').addEventListener('input', function () {
            validateField('website', 'websiteStatus');
        });

        // Обработчик отправки формы
        document.getElementById('myForm').addEventListener('submit', function (e) {
            e.preventDefault(); // Предотвращаем стандартную отправку

            // Проверяем все обязательные поля перед отправкой
            let allRequiredValid = true;

            // Имя
            if (document.getElementById('name').value.trim() === '') {
                allRequiredValid = false;
            }

            // Email
            if (document.getElementById('email').value.trim() === '') {
                allRequiredValid = false;
            }

            if (allRequiredValid) {
                alert("Форма успешно заполнена!");
                // Здесь можно добавить логику отправки данных на сервер
            } else {
                alert("Пожалуйста, заполните все обязательные поля.");
            }
        });
    </script>
</body>

</html>